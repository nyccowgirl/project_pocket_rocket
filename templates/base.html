<!doctype html>
<html>
<head>
  <title>BUDdy</title>

  <!-- Required meta tags -->
  <meta name='viewport' content='width=device-width, initial-scale=1, shrink-to-fit=no'>

  <!-- Bootstrap CSS -->
  <link rel='stylesheet' href='https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css'>
  <link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.4.3/css/mdb.min.css'>

  <link href='https://fonts.googleapis.com/css?family=Architects+Daughter|Shadows+Into+Light+Two|Lato|Raleway:100,700' rel='stylesheet'>
<!--   <link rel='stylesheet' type='text/css' href='/static/css/maps.css'>
 -->
  <link rel='stylesheet' type='text/css' href='/static/css/styles.css'>


<!--     <meta name="google-signin-client_id" content="YOUR_CLIENT_ID.apps.googleusercontent.com"> -->


    {% block head %}
      <!-- Put extra CSS/JS here -->
    {% endblock %}

</head>
<body>

  <nav class='navbar navbar-expand-lg navbar-dark'>
  <!-- Image and text -->
    <a class='navbar-brand' href='/' style='font-family: Architects Daughter, cursive'>
      <img src='/static/img/pinky.jpg' width='30' height='30' class='d-inline-block align-top' alt=''>BUDdy
    </a>
    <button class='navbar-toggler' type='button' data-toggle='collapse' data-target='#navbarSupportedContent' aria-controls='navbarSupportedContent' aria-expanded='false' aria-label='Toggle navigation'>
      <span class='navbar-toggler-icon'></span>
    </button>

  <!-- Search bar -->
    <div class='collapse navbar-collapse justify-content-end' id='navbarSupportedContent'>

      <form class='mx-2 my-auto d-inline w-75' id='biz-search' action='/search-biz' enctype='multipart/form-data'>
        <div class='input-group'>
          <input class='form-control search' name='search' placeholder='Where To?' autocomplete='on' autofocus='autofocus' type='text'>
          <span class='input-group-btn'>
            <button id='search-btn' class='btn btn-outline-light' type='submit'>Search</button>
          </span>
        </div>
      </form>

              <!-- TO DO: build out BUD button for submit button
              build out /search page and related python code -->

  <!-- Profile, register and login/logout -->
      <ul class='navbar-nav ml-auto' id='nav-item'>
        <li class='nav-item'>
          <a class='nav-link' href='/'>Home <span class='sr-only'>(current)</span></a>
        </li>

        {% if 'user_id' in session %}
          <li class='nav-item'>
            <a class='nav-link' href='/logout'>Log Out</a>
          </li>
        {% endif %}

        {% if 'user_id' in session %}
          <li class='nav-item dropdown'>
            <a class='nav-link dropdown-toggle' href='#' id='navbarDropdown' role='button' data-toggle='dropdown' aria-haspopup='true' aria-expanded='false'>
              Profile
            </a>
              <div class='dropdown-menu dropdown-menu-right' aria-labelledby='navbarDropdown'>
                <a class='dropdown-item' href='/user-profile'>Account</a>
                <a class='dropdown-item' href='/user-friends'>Friends</a>
                <div class='dropdown-divider'></div>
                <a class='dropdown-item' href='/user-reviews'>Reviews</a>
                <a class='dropdown-item' href='/user-referrals'>Referrals</a>
                <a class='dropdown-item' href='/user-promos'>Promos/Reds</a>
                {% if session['biz_acct'] == True %}
                  <div class='dropdown-divider'></div>
                  <a class='dropdown-item' href='/user-biz'>Business Account</a>
                {% endif %}
              </div>
          </li>
          <!-- TO DO: Break up various components of user-profile into sections -->
          <img src='{{ session['user_pic'] }}' width='30' height='30' class='d-inline-block align-top' alt='right'>
        {% else %}

          <li class='nav-item'>
            <a class='nav-link modal-toggle' href='#login-div' data-toggle='modal' data-target='#modalLRForm'>Log In/Register</a>
            <!-- nav-link disabled => if needed -->
          </li>
        {% endif %}
      </ul>
    </div>
  </nav>


<!-- BEGIN # MODAL LOGIN -->
<div class='modal fade' id='modalLRForm' tabindex='-1' role='dialog' aria-labelledby='myModalLabel' aria-hidden='true'>
  <div class='modal-dialog cascading-modal' role='document'>
    <!-- Content -->
    <div class='modal-content'>
      <!-- FIXME: move body div b/f panes -->
      <!-- Modal cascading tabs -->
      <div class='modal-c-tabs'>
        <!-- Nav tabs -->
        <ul class='nav nav-tabs tabs-2 light-blue darken-1' role='tablist'>
          <li class='nav-item'>
            <a class='nav-link active unique-text' data-toggle='tab' href='#login-div' role='tab'><i class='fa fa-user mr-1'></i>Log In</a>
          </li>
          <li class='nav-item'>
            <a class='nav-link unique-text' data-toggle='tab' href='#register-div' role='tab'><i class='fa fa-user-plus mr-1'></i>Register</a>
          </li>
          <li class='nav-item'>
            <a class='nav-link unique-text' data-toggle='tab' href='#lost-div' role='tab'><i class='fa fa-lock mr-1'></i>Lost Password</a>
          </li>
        </ul>

        <!-- Tab panels -->
        <div id='div-forms' class='tab-content'>
          <!-- Log In panel -->
          <div class='tab-pane fade in active' id='login-div'>
            <form action='/login' method='POST' role='tabpanel' id='login-form' enctype='multipart/form-data'>

              <!-- Body -->
              <div class='modal-body mb-1'>
                <!-- FIXME: turn into modal content class rather than modal body? -->
                <div class='md-form form-sm'>
                  <i class='fa fa-envelope prefix'></i>
                  <input type='text' id='user-input' name='user-input' class='form-control lowercase'>
                  <label for='user-input'>Username or Email</label>
                </div>

                <div class='md-form form-sm'>
                  <i class='fa fa-lock prefix'></i>
                  <input type='password' id='pword' name='pword' class='form-control'>
                  <label for='pword'>Password</label>
                </div>

                <div class='text-center mt-2'>
                  <button type='submit' class='btn btn-unique'>Log In<i class='fa fa-sign-in ml-1'></i></button>
                </div>

                <div class='checkbox'>
                  <label><input type='checkbox' name='remember'> Remember me</label>
                </div>

              </div>

              <!-- Footer -->
              <div class='modal-footer display-footer'>
                <div class='options text-center text-md-right mt-1'>
                  <p>Not a member? <a href='#register-form' class='unique-text' id='login_register_btn'>Sign Up</a></p>
                  <p>Forgot <a href='#lost-form' class='unique-text' id='login_lost_btn'>Password?</a></p>
                </div>

                <button type='button' class='btn btn-outline-unique waves-effect ml-auto' data-dismiss='modal'>Close</button>
              </div>
            </form>
          </div>
          <!-- /.Log In panel -->

          <!-- Registration Panel -->
          <div id='register-div' class='tab-pane fade'>
            <form action='/register' method='POST'  role='tabpanel' id='register-form' enctype='multipart/form-data'>

              <!-- Body -->
              <div class='modal-body'>
                <div class='md-form form-sm'>
                  <i class='fa fa-user prefix'></i>
                  <input type='text' id='fname' name='fname' class='form-control'>
                  <label for='fname'>First Name</label>
                </div>

                <div class='md-form form-sm'>
                  <i class='fa fa-user prefix'></i>
                  <input type='text' id='lname' name='lname' class='form-control'>
                  <label for='lname'>Last Name</label>
                </div>

                <div class='md-form form-sm'>
                  <i class='fa fa-user prefix'></i>
                  <input type='text' id='username' name='username' class='form-control lowercase'>
                  <label for='username'>Username</label>
                </div>

                <div class='md-form form-sm'>
                  <i class='fa fa-envelope prefix'></i>
                  <input type='text' id='email-reg' name='email-reg' class='form-control lowercase'>
                  <label for='email-reg'>Email</label>
                </div>

                <div class='md-form form-sm'>
                  <i class='fa fa-lock prefix'></i>
                  <input type='password' id='pword-reg' name='pword-reg' class='form-control'>
                  <label for='pword-reg'>Password</label>
                </div>

                <div class='md-form form-sm'>
                  <i class='fa fa-lock prefix'></i>
                  <input type='password' id='pword-rep' name='pword-rep' class='form-control'>
                  <label for='pword-rep'>Repeat Password</label>
                </div>

                <div class='md-form form-sm'>
                  <i class='fa fa-birthday-cake prefix'></i>
                  <input type='text' id='bday' name='bday' class='form-control'>
                  <label for='bday'>Date of Birth</label>
                </div>

                <div class='md-form form-sm'>
                  <i class='fa fa-camera prefix'></i>
                  <input type='file' id='user-pic' name='user-pic' accept='image/*'>
                  <label for='user-pic'>Picture</label>
                </div>

                <!-- Radio -->
                <div class='md-form form-sm'>
                  <i class='fa fa-building prefix'></i>
                  <p class='text-center'><strong>Business Account?</strong></p>
                  <div class='form-group'>
                    <input type='radio' id='biz-si' name='biz' value='true'>Yes
                    <label for='biz-si'>Yes</label>
                  </div>

                  <div class='form-group'>
                    <input type='radio' id='biz-no' name='biz' value='false' checked>No
                  <label for='biz-no'>No</label>
                  </div>
                </div>
                <!-- /.Radio -->

                <div class='text-center mt-2'>
                  <button type='submit' class='btn btn-unique'>Register<i class='fa fa-send ml-1'></i></button>
                </div>

              </div>
              <!-- Footer -->
              <div class='modal-footer'>
                <div class='options text-right'>
                  <p class='pt-1'>Already have an account? <a href='#login-form' class='unique-text' id='register_login_btn'>Log In</a></p>
                </div>

                <button type='button' class='btn btn-outline-unique waves-effect ml-auto' data-dismiss='modal'>Close</button>
              </div>

            </form>
          </div>
          <!-- /.Registration panel -->

          <!-- Password change panel -->
          <div id='lost-div' class='tab-pane fade'>
            <form action='/pword-reset' method='POST' id='lost-form' role='tabpanel' enctype='multipart/form-data'>

              <!-- Body -->
              <div class='modal-body mb-1'>
                <div class='md-form form-sm'>
                  <i class='fa fa-lock prefix'></i>
                  <input type='text' id='email-lost' name='email-lost' class='form-control lowercase'>
                  <label for='email-lost'>Email</label>
                </div>

                <div class='text-center mt-2'>
                  <button type='submit' class='btn btn-unique'>Submit<i class='fa fa-send ml-1'></i></button>
                </div>
              </div>
              <!-- /.Body -->

              <!-- Footer -->
              <div class='modal-footer display-footer'>
                <div class='options text-center text-md-right mt-1'>
                  <p>Not a member? <a href='#register-form' class='unique-text' id='lost_register_btn'>Sign Up</a></p>
                  <p>Remembered! <a href='#login-form' class='unique-text' id='lost_login_btn'>Log In</a></p>
                </div>

                <button type='button' class='btn btn-outline-unique waves-effect ml-auto' data-dismiss='modal'>Close</button>
              </div>
            </form>
          </div>
          <!-- /.Password change panel -->
        </div>
        <!-- /.Tab panels -->
      </div>
      <!-- /.Modal cascading -->
    </div>
    <!-- /.Content -->
  </div>
</div>
<!-- Modal: Login / Regisration form -->

<!-- {% for flash in get_flashed_messages() %}
  {{ flash }}
{% endfor %} -->

{% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
    <ul class=flashes>
    {% for category, message in messages %}
      <p class='alert alert-{{ category }}'>{{ message }}</p>
    {% endfor %}
    </ul>
  {% endif %}
{% endwith %}

<!-- {% with messages = get_flashed_messages(with_categories=true) %} -->
  <!-- Categories: success (green), info (blue), warning (yellow), danger (red) -->
<!--   {% if messages %}
    {% for category, message in messages %}
      <div class='alert alert-{{ category }} alert-dismissible' role='alert'>
      <button type='button' class='close' data-dismiss='alert' aria-label='Close'><span aria-hidden='true'>&times;</span></button> -->
      <!-- <strong>Title</strong> --> <!-- {{ message }}
      </div>
    {% endfor %}
  {% endif %}
{% endwith %} -->

{% block content %}
    Put your body here.
{% endblock %}

<!--Footer-->
<footer id='footer' class='footer center-on-small-only pt-0'>
    <!--Footer Links-->
    <hr>
        <!--Grid row-->
        <div class='row pt-3 text-center d-flex justify-content-center'>
            <!--Grid column-->
            <div class='col-md-2 mb-2'>
                <h6 class='title font-bold'><a href='/about-us'>About us</a></h6>
            </div>
            <div class='col-md-2 mb-2'>
                <h6 class='title font-bold'><a href="#!">Help</a></h6>
            </div>
            <div class='col-md-2 mb-2'>
                <h6 class='title font-bold'><a href='mailto:balloonicorn@hackbrightacademy.com'>Contact</a></h6>
            </div>

        </div>

        <hr class='rgba-white-light' style='margin: 0 15%;'>

        <div class='row pb-2'>

            <div class='col-md-12'>

                <div class='footer-socials mb-3 flex-center'>
                    <!--Facebook-->
                    <a class='icons-sm fb-ic'><i class='fa fa-facebook fa-lg white-text mr-md-4'> </i></a>
                    <!--Twitter-->
                    <a class='icons-sm tw-ic'><i class='fa fa-twitter fa-lg white-text mr-md-4'> </i></a>
                    <!--Google +-->
                    <a class='icons-sm gplus-ic'><i class='fa fa-google-plus fa-lg white-text mr-md-4'> </i></a>
                    <!--Linkedin-->
                    <a class='icons-sm li-ic'><i class='fa fa-linkedin fa-lg white-text mr-md-4'> </i></a>
                    <!--Instagram-->
                    <a class='icons-sm ins-ic'><i class='fa fa-instagram fa-lg white-text mr-md-4'> </i></a>
                    <!--Pinterest-->
                    <a class='icons-sm pin-ic'><i class='fa fa-pinterest fa-lg white-text'> </i></a>
                </div>
            </div>
        </div>

    <!--Social buttons-->
<!--     <div class="social-section text-center">
        <ul>

            <li><a class="btn-floating btn-sm btn-fb"><i class="fa fa-facebook"> </i></a></li>
            <li><a class="btn-floating btn-sm btn-tw"><i class="fa fa-twitter"> </i></a></li>
            <li><a class="btn-floating btn-sm btn-gplus"><i class="fa fa-google-plus"> </i></a></li>
            <li><a class="btn-floating btn-sm btn-li"><i class="fa fa-linkedin"> </i></a></li>

        </ul>
    </div> -->
    <!--/.Social buttons-->

    <!--Copyright-->
    <div class='footer-copyright'>
        <div class='container-fluid'>
          © 2017 Copyright: <a href='/' style='color: #f3e5f5;'> BUDdy.com </a>
        </div>
    </div>
    <!--/Copyright-->
</footer>

  <!-- FIXME: Footer is not sticky footer but on some pages it is not at bottom of page but at bottom of content. -->

<!-- jQuery first, then Popper.js, then Bootstrap JS, then other JS -->
  <script src='https://code.jquery.com/jquery.js'></script>
  <script src='https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js'></script>
  <script src='https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js'></script>
  <script src='https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.4.3/js/mdb.min.js'></script>
  <script src='https://use.fontawesome.com/0bc045b751.js'></script>
  <script type='text/javascript' src='/static/js/main.js'></script>
  <script type='text/javascript' src='/static/js/modular.js'></script>


{% block script %}

{% endblock %}

<script>
  // function signOut() {
  //   let auth2 = gapi.auth2.getAuthInstance();
  //   auth2.signOut().then(function () {
  //     console.log('User signed out.');
  //   });
  // }
  // $('#glogout').on('click', signOut); // not sure if duplicative with above onclick.
</script>


</body>

</html>